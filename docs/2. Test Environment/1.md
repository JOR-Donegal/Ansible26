# Servers
These exercises will work in any environment where you can run safely run multiple Linux instances. I assume you can you Linux and VMWare Workstation.

I will be doing these exercises in VMWare Workstation on a local computer. My NAT'd network uses 192.168.228.0/24

I do updates on my gold images and then create the following VMs as linked clones.

| Type    | hostname        | 
| ------  | --------------- | 
| Server  | AnsibleServer1  | 
| Server  | AnsibleServer2  | 

I need to assign the following IP addresses to my nodes.

| hostname        | IPv4 address    |
| --------------- | --------------- |
| AnsibleServer1  | 192.168.228.111 |
| AnsibleServer2  | 192.168.228.112 |

The gateway for this LAN is on 192.168.228.2 and I use 9.9.9.9 as an Internet DNS. 

## Static IP address
Set static IP addreses on each server. Check to see what configuration file exists at __/etc/netplan__

For me, this was __50-cloud-init.yaml__, examine this file, it is set for DHCP.

I make a backup before I begin. 
```
sudo cp 50-cloud-init.yaml 50-cloud-init.bak
```
Next I edit the content as shown below, the example is for __ansibleserver1__.

```
network:
  ethernets:
    ens33:
      dhcp4: no
      addresses:
        - 192.168.228.111/24
      routes:
        - to: default
          via: 192.168.228.2
      nameservers:
        addresses:
          - 9.9.9.9
  version: 2
```

Do some reading to understand __cloud.init__, we need to disable it!

Create a file  __/etc/cloud/cloud.cfg.d/99-disable-network-config.cfg__ with the content as shown below.
```
network: {config: disabled}
```
## Hostname
I edit __/etc/hostname__ to give each server the correct hostname.


## Host resolution
I edit __/etc/hosts__ as we do not have a local DNS (and we must be able to find the other nodes!). 

```
127.0.0.1 localhost
192.168.228.110 ansiblemanager
192.168.228.111 ansibleserver1
192.168.228.112 ansibleserver2
192.168.228.113 ansibleserver3

# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters

```
Adapt these configurations and also configure __ansibleserver2__


Test the VMs by attempting an update and then ping from VM to VM using their hostnames.



On the servers, I did updates and installed the minimum software I need.
